<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sélection des matériaux - LE BRAS DE FER</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;900&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    margin: 0;
    background: #000;
    color: #dedede;
    font-family: "Roboto", sans-serif;
    overflow-x: hidden;
    scroll-behavior: smooth;
    position: relative;
}

/* Fond animé avec particules */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at 20% 20%, #1a0a00, #0a0500, #000);
    z-index: -2;
}

/* Grille animée */
.grid-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        linear-gradient(rgba(255, 122, 0, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 122, 0, 0.03) 1px, transparent 1px);
    background-size: 50px 50px;
    z-index: -1;
    animation: gridMove 20s linear infinite;
}

@keyframes gridMove {
    0% { transform: translateY(0); }
    100% { transform: translateY(50px); }
}

/* Particules flottantes */
.particle {
    position: fixed;
    width: 2px;
    height: 2px;
    background: #ff7a00;
    border-radius: 50%;
    pointer-events: none;
    opacity: 0;
    animation: float 15s infinite ease-in-out;
    box-shadow: 0 0 10px rgba(255, 122, 0, 0.5);
    z-index: -1;
}

@keyframes float {
    0%, 100% { transform: translateY(100vh) translateX(0); opacity: 0; }
    10% { opacity: 0.6; }
    90% { opacity: 0.6; }
    100% { transform: translateY(-100vh) translateX(100px); }
}

h1, h2 { font-family: "Orbitron", sans-serif; }
a { text-decoration: none; color: #ff7a00; }

/* SECTIONS PLEIN ÉCRAN */
section {
    width: 100%;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    text-align: center;
    padding: 60px 5%;
    position: relative;
}

/* TITRE AMÉLIORÉ */
.title-section {
    position: relative;
}

.title-section h1 {
    font-size: clamp(2rem, 8vw, 4rem);
    font-weight: 900;
    background: linear-gradient(135deg, #ff7a00, #ff9d42, #ffb366);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 0 40px rgba(255, 123, 0, 0.4);
    opacity: 0;
    transform: translateY(80px) scale(0.9);
    transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    letter-spacing: 3px;
    position: relative;
}

.title-section h1::after {
    content: '';
    position: absolute;
    bottom: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 3px;
    background: linear-gradient(90deg, transparent, #ff7a00, transparent);
    transition: width 0.8s ease 0.3s;
}

.title-section h1.visible::after {
    width: 80%;
}

/* TEXTE AMÉLIORÉ */
.text-section {
    max-width: 900px;
}

.text-section p {
    font-size: clamp(1rem, 2.5vw, 1.3rem);
    line-height: 1.8;
    opacity: 0;
    transform: translateY(60px);
    transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    color: #c0c0c0;
    font-weight: 300;
    padding: 0 20px;
}

/* IMAGE AMÉLIORÉE */
.image-section img {
    width: 85%;
    max-width: 900px;
    border-radius: 20px;
    box-shadow: 
        0 0 50px rgba(255, 115, 0, 0.3),
        0 20px 60px rgba(0, 0, 0, 0.7);
    opacity: 0;
    transform: translateY(80px) scale(0.9);
    transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    border: 1px solid rgba(255, 122, 0, 0.2);
}

.image-section img:hover {
    transform: translateY(0) scale(1.02);
    box-shadow: 
        0 0 70px rgba(255, 115, 0, 0.5),
        0 30px 80px rgba(0, 0, 0, 0.8);
}

/* CARROUSEL OPTIMISÉ */
.carousel-wrapper {
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 100px 0 200px 0;
    perspective: 2000px;
    position: relative;
}

.carousel-title {
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    color: #ff7a00;
    margin-bottom: 60px;
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.6s ease;
    font-weight: 700;
    letter-spacing: 2px;
}

.carousel-container {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    perspective: 2000px;
    opacity: 0;
    transition: opacity 0.8s ease;
    width: 100%;
    height: 450px;
}

.carousel {
    position: relative;
    transform-style: preserve-3d;
    width: auto;
    height: 100%;
    transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.img-wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform-style: preserve-3d;
    transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.img-wrapper img {
    width: 280px;
    height: 380px;
    object-fit: cover;
    border-radius: 20px;
    border: 2px solid rgba(255, 122, 0, 0.3);
    background: rgba(20, 20, 20, 0.8);
    box-shadow: 
        0 10px 40px rgba(0, 0, 0, 0.8),
        0 0 30px rgba(255, 115, 0, 0.2),
        inset 0 0 20px rgba(255, 122, 0, 0.05);
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    will-change: transform;
    backface-visibility: hidden;
}

.img-wrapper.active img {
    border-color: rgba(255, 122, 0, 0.8);
    box-shadow: 
        0 15px 60px rgba(0, 0, 0, 0.9),
        0 0 50px rgba(255, 115, 0, 0.6),
        inset 0 0 30px rgba(255, 122, 0, 0.1);
}

.img-wrapper:hover img {
    transform: scale(1.15) translateY(-10px);
    box-shadow: 
        0 20px 80px rgba(0, 0, 0, 1),
        0 0 60px rgba(255, 115, 0, 0.8);
    z-index: 100 !important;
    border-color: #ff7a00;
}

/* CONTRÔLES DU CARROUSEL */
.carousel-controls {
    position: absolute;
    top: 50%;
    width: 100%;
    display: flex;
    justify-content: space-between;
    padding: 0 20px;
    transform: translateY(-50%);
    pointer-events: none;
    z-index: 10;
}

.carousel-btn {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: rgba(255, 122, 0, 0.1);
    border: 2px solid rgba(255, 122, 0, 0.4);
    color: #ff7a00;
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    pointer-events: all;
    backdrop-filter: blur(10px);
    font-weight: bold;
}

.carousel-btn:hover {
    background: rgba(255, 122, 0, 0.3);
    border-color: #ff7a00;
    transform: scale(1.1);
    box-shadow: 0 0 30px rgba(255, 122, 0, 0.5);
}

.carousel-btn:active {
    transform: scale(0.95);
}

/* INDICATEURS */
.carousel-indicators {
    display: flex;
    gap: 12px;
    margin-top: 50px;
    opacity: 0;
    transition: opacity 0.6s ease 0.3s;
}

.indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 122, 0, 0.2);
    border: 2px solid rgba(255, 122, 0, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
}

.indicator.active {
    background: #ff7a00;
    border-color: #ff7a00;
    box-shadow: 0 0 15px rgba(255, 122, 0, 0.8);
    transform: scale(1.3);
}

.indicator:hover {
    background: rgba(255, 122, 0, 0.5);
    transform: scale(1.2);
}

/* INSTRUCTIONS */
.carousel-instructions {
    margin-top: 30px;
    font-size: 0.9rem;
    color: rgba(255, 122, 0, 0.6);
    opacity: 0;
    transition: opacity 0.6s ease 0.4s;
}

/* BOUTON RETOUR AMÉLIORÉ */
.return {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    padding: 18px 40px;
    font-family: "Orbitron", sans-serif;
    font-size: 1.1rem;
    font-weight: 600;
    background: linear-gradient(135deg, rgba(255, 122, 0, 0.1), rgba(255, 122, 0, 0.05));
    border: 2px solid rgba(255, 122, 0, 0.4);
    border-radius: 50px;
    color: #ff7a00;
    opacity: 0;
    transform: translateY(50px);
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    margin: 80px 0 50px 0;
    backdrop-filter: blur(10px);
    position: relative;
    overflow: hidden;
}

.return::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 122, 0, 0.2);
    transform: translate(-50%, -50%);
    transition: width 0.5s ease, height 0.5s ease;
}

.return:hover::before {
    width: 300px;
    height: 300px;
}

.return:hover {
    transform: translateY(0) scale(1.05);
    border-color: #ff7a00;
    box-shadow: 0 0 30px rgba(255, 122, 0, 0.4);
}

.return.visible {
    opacity: 1;
    transform: translateY(0);
}

.return span {
    position: relative;
    z-index: 1;
}

/* CLASSES D'ANIMATION */
.visible {
    opacity: 1 !important;
    transform: translateY(0) scale(1) !important;
}

/* RESPONSIVE */
@media screen and (max-width: 768px) {
    section { padding: 40px 5%; }
    
    .title-section h1 { letter-spacing: 1px; }
    
    .carousel-wrapper { padding: 80px 0 150px 0; }
    
    .img-wrapper img {
        width: 220px;
        height: 300px;
    }
    
    .carousel-btn {
        width: 50px;
        height: 50px;
        font-size: 20px;
    }
    
    .carousel-controls { padding: 0 10px; }
    
    .return {
        padding: 15px 30px;
        font-size: 1rem;
    }
}

@media screen and (max-width: 480px) {
    .img-wrapper img {
        width: 180px;
        height: 250px;
    }
    
    .carousel-btn {
        width: 45px;
        height: 45px;
        font-size: 18px;
    }
    
    .carousel-container { height: 350px; }
}

/* Animation de chargement */
@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.loading {
    animation: pulse 2s infinite;
}
</style>
</head>

<body>
<div class="grid-bg"></div>

<section class="title-section">
    <h1 id="mainTitle">Sélection des matériaux</h1>
</section>

<section class="text-section">
    <p id="mainText">
        Cette section présente la sélection des matériaux pour le bras robotique 3 axes.
        Chaque matériau a été choisi pour sa résistance, légèreté et compatibilité avec le projet.
        Explorez le carrousel interactif pour découvrir les différents matériaux utilisés.
    </p>
</section>

<section class="image-section">
    <img src="https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=800" alt="Illustration matériaux" id="mainImage">
</section>

<section class="carousel-wrapper">
    <h2 class="carousel-title" id="carouselTitle">Découvrez nos matériaux</h2>
    
    <div class="carousel-container" id="carouselContainer">
        <div class="carousel-controls">
            <button class="carousel-btn" id="prevBtn" aria-label="Précédent">‹</button>
            <button class="carousel-btn" id="nextBtn" aria-label="Suivant">›</button>
        </div>
        
        <div class="carousel" id="carousel">
            <div class="img-wrapper"><img src="https://images.unsplash.com/photo-1611329857570-f02f340e7378?w=400" alt="Matériau 1" loading="lazy"></div>
            <div class="img-wrapper"><img src="https://images.unsplash.com/photo-1612198188060-c7c2a3b66eae?w=400" alt="Matériau 2" loading="lazy"></div>
            <div class="img-wrapper"><img src="https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=400" alt="Matériau 3" loading="lazy"></div>
            <div class="img-wrapper"><img src="https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=400" alt="Matériau 4" loading="lazy"></div>
            <div class="img-wrapper"><img src="https://images.unsplash.com/photo-1581092580497-e0d23cbdf1dc?w=400" alt="Matériau 5" loading="lazy"></div>
            <div class="img-wrapper"><img src="https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=400" alt="Matériau 6" loading="lazy"></div>
            <div class="img-wrapper"><img src="https://images.unsplash.com/photo-1581092160607-ee22621dd758?w=400" alt="Matériau 7" loading="lazy"></div>
            <div class="img-wrapper"><img src="https://images.unsplash.com/photo-1581092162384-8987c1d64718?w=400" alt="Matériau 8" loading="lazy"></div>
            <div class="img-wrapper"><img src="https://images.unsplash.com/photo-1581092335397-9583eb92d232?w=400" alt="Matériau 9" loading="lazy"></div>
            <div class="img-wrapper"><img src="https://images.unsplash.com/photo-1581092580497-e0d23cbdf1dc?w=400" alt="Matériau 10" loading="lazy"></div>
        </div>
    </div>
    
    <div class="carousel-indicators" id="indicators"></div>
    <div class="carousel-instructions" id="instructions">
        Utilisez les flèches, la molette ou faites glisser pour naviguer
    </div>
</section>

<a href="Details_Du_Projet.html" class="return" id="returnBtn">
    <span>⬅</span>
    <span>Retour</span>
</a>

<script>
// Création des particules
for(let i = 0; i < 20; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.left = Math.random() * 100 + '%';
    p.style.animationDelay = Math.random() * 15 + 's';
    p.style.animationDuration = (10 + Math.random() * 10) + 's';
    document.body.appendChild(p);
}

// Éléments
const title = document.getElementById('mainTitle');
const text = document.getElementById('mainText');
const img = document.getElementById('mainImage');
const container = document.getElementById('carouselContainer');
const carouselTitle = document.getElementById('carouselTitle');
const carousel = document.getElementById('carousel');
const returnBtn = document.getElementById('returnBtn');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const instructions = document.getElementById('instructions');
const indicatorsContainer = document.getElementById('indicators');

const wrappers = Array.from(carousel.querySelectorAll('.img-wrapper'));
const wrapperCount = wrappers.length;

let currentIndex = 0;
let angle = 0;
const angleStep = 360 / wrapperCount;
let isAnimating = false;

// Créer les indicateurs
wrappers.forEach((_, i) => {
    const ind = document.createElement('div');
    ind.className = 'indicator';
    if(i === 0) ind.classList.add('active');
    ind.addEventListener('click', () => {
        if(!isAnimating) {
            const diff = i - currentIndex;
            rotateCarousel(diff);
        }
    });
    indicatorsContainer.appendChild(ind);
});

const indicators = Array.from(indicatorsContainer.querySelectorAll('.indicator'));

// Position initiale optimisée
function positionImages() {
    const imgWidth = 280;
    const z = imgWidth / (2 * Math.tan(Math.PI / wrapperCount)) * 1.5;
    
    wrappers.forEach((wrapper, i) => {
        const theta = angle + i * angleStep;
        wrapper.style.transform = `rotateY(${theta}deg) translateZ(${z}px) translate(-50%, -50%)`;
        
        if(i === currentIndex) {
            wrapper.classList.add('active');
        } else {
            wrapper.classList.remove('active');
        }
    });
    
    // Mise à jour des indicateurs
    indicators.forEach((ind, i) => {
        ind.classList.toggle('active', i === currentIndex);
    });
}

positionImages();

// Animation au scroll optimisée
function animateOnScroll(elem, offset = 0.5) {
    const rect = elem.getBoundingClientRect();
    const windowH = window.innerHeight;
    const progress = 1 - ((rect.top + rect.height / 2 - windowH * offset) / (windowH * offset + rect.height / 2));
    return Math.min(Math.max(progress, 0), 1);
}

let ticking = false;
function handleScroll() {
    if(!ticking) {
        window.requestAnimationFrame(() => {
            let p = animateOnScroll(title, 0.4);
            title.style.opacity = p;
            title.style.transform = `translateY(${80 * (1 - p)}px) scale(${0.9 + 0.1 * p})`;
            if(p > 0.8) title.classList.add('visible');
            
            p = animateOnScroll(text);
            text.style.opacity = p;
            text.style.transform = `translateY(${60 * (1 - p)}px)`;
            
            p = animateOnScroll(img);
            img.style.opacity = p;
            img.style.transform = `translateY(${80 * (1 - p)}px) scale(${0.9 + 0.1 * p})`;
            
            p = animateOnScroll(carouselTitle);
            carouselTitle.style.opacity = p;
            carouselTitle.style.transform = `translateY(${30 * (1 - p)}px)`;
            
            p = animateOnScroll(container);
            container.style.opacity = p;
            
            if(p > 0.5) {
                indicatorsContainer.style.opacity = 1;
                instructions.style.opacity = 1;
            }
            
            if(p > 0.95) returnBtn.classList.add('visible');
            else returnBtn.classList.remove('visible');
            
            ticking = false;
        });
        ticking = true;
    }
}

window.addEventListener('scroll', handleScroll, { passive: true });
handleScroll();

// Rotation améliorée avec animation fluide
function rotateCarousel(steps) {
    if(isAnimating) return;
    isAnimating = true;
    
    currentIndex = (currentIndex + steps + wrapperCount) % wrapperCount;
    angle = -currentIndex * angleStep;
    
    positionImages();
    
    setTimeout(() => {
        isAnimating = false;
    }, 600);
}

// Contrôles boutons
prevBtn.addEventListener('click', () => rotateCarousel(-1));
nextBtn.addEventListener('click', () => rotateCarousel(1));

// Wheel optimisé
let wheelCooldown = false;
carousel.addEventListener('wheel', e => {
    const absX = Math.abs(e.deltaX);
    const absY = Math.abs(e.deltaY);
    
    if(absX > absY || e.shiftKey) {
        e.preventDefault();
        if(!wheelCooldown && !isAnimating) {
            const dir = (e.deltaX > 0 || (e.shiftKey && e.deltaY > 0)) ? 1 : -1;
            rotateCarousel(dir);
            wheelCooldown = true;
            setTimeout(() => { wheelCooldown = false; }, 200);
        }
    }
}, { passive: false });

// Drag amélioré
let startX, isDragging = false, hasMoved = false;
carousel.addEventListener('mousedown', e => {
    isDragging = true;
    startX = e.clientX;
    hasMoved = false;
    carousel.style.cursor = 'grabbing';
});

carousel.addEventListener('mousemove', e => {
    if(isDragging) {
        const diff = e.clientX - startX;
        if(Math.abs(diff) > 5) hasMoved = true;
        if(Math.abs(diff) > 80 && !isAnimating) {
            rotateCarousel(diff > 0 ? -1 : 1);
            startX = e.clientX;
        }
    }
});

carousel.addEventListener('mouseup', () => {
    isDragging = false;
    carousel.style.cursor = 'grab';
});

carousel.addEventListener('mouseleave', () => {
    isDragging = false;
    carousel.style.cursor = 'grab';
});

carousel.style.cursor = 'grab';

// Touch amélioré pour mobile
let startTouchX = 0, touchMoved = false;
carousel.addEventListener('touchstart', e => {
    startTouchX = e.touches[0].clientX;
    touchMoved = false;
}, { passive: true });

carousel.addEventListener('touchmove', e => {
    if(e.touches.length === 1) {
        const diff = e.touches[0].clientX - startTouchX;
        if(Math.abs(diff) > 5) touchMoved = true;
        if(Math.abs(diff) > 60 && !isAnimating) {
            rotateCarousel(diff > 0 ? -1 : 1);
            startTouchX = e.touches[0].clientX;
        }
    }
}, { passive: true });

// Clavier
document.addEventListener('keydown', e => {
    if(e.key === 'ArrowLeft') rotateCarousel(-1);
    if(e.key === 'ArrowRight') rotateCarousel(1);
});

// Resize optimisé
let resizeTimeout;
window.addEventListener('resize', () => {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(positionImages, 150);
});
</script>

</body>
</html>